═══════════════════════════════════════════════════════════════════
           اختبارات التحقق بعد رفع الملفات على iPage
═══════════════════════════════════════════════════════════════════

استخدم هذا الدليل للتأكد من أن كل شيء يعمل بشكل صحيح بعد الرفع.

───────────────────────────────────────────────────────────────────
اختبار 1: التحقق من الصفحة الرئيسية
───────────────────────────────────────────────────────────────────

URL: https://yourdomain.com

✅ ما يجب أن يحدث:
   - الصفحة الرئيسية تظهر بشكل صحيح
   - الشعار والعناوين واضحة
   - الستايلات والألوان تظهر
   - نموذج إدخال رابط TikTok موجود

❌ إذا ظهر خطأ 500:
   → افحص storage/logs/laravel.log
   → تحقق من صلاحيات storage/ و bootstrap/cache/
   → راجع معلومات قاعدة البيانات في .env

❌ إذا ظهرت صفحة بيضاء:
   → تأكد من وجود vendor/ في laravel-app/
   → تحقق من APP_KEY في .env
   → فعّل APP_DEBUG=true مؤقتاً لرؤية الخطأ

❌ إذا كانت الستايلات مفقودة:
   → تحقق من APP_URL في .env
   → تأكد من رفع جميع ملفات public/ إلى public_html/

───────────────────────────────────────────────────────────────────
اختبار 2: التحقق من لوحة الإدارة
───────────────────────────────────────────────────────────────────

URL: https://yourdomain.com/admin

✅ ما يجب أن يحدث:
   - إعادة توجيه إلى صفحة تسجيل الدخول
   - نموذج تسجيل الدخول يظهر بشكل صحيح

URL: https://yourdomain.com/admin/login

أدخل بيانات المدير:
   Email: ___________________
   Password: ________________

✅ بعد تسجيل الدخول:
   - إعادة توجيه إلى /admin/settings
   - القائمة الجانبية تظهر:
     * Site Settings
     * Configure Proxies
     * Appearance
     * My Account
     * Maintenance
   - معلومات الموقع تظهر بشكل صحيح

❌ إذا ظهر خطأ في تسجيل الدخول:
   → تحقق من صحة بيانات المدير في قاعدة البيانات
   → راجع SESSION_DRIVER في .env (يجب أن يكون file)
   → تأكد من صلاحيات storage/framework/sessions/

───────────────────────────────────────────────────────────────────
اختبار 3: التحقق من واجهة الصيانة
───────────────────────────────────────────────────────────────────

URL: https://yourdomain.com/admin/maintenance

✅ ما يجب أن يظهر:
   - معلومات النظام (حجم الكاش، حجم اللوجات)
   - قسم "إدارة الكاش" مع أزرار:
     * مسح الكاش
     * تحسين الأداء
   - قسم "إدارة اللوجات" مع زر:
     * مسح ملفات اللوج

اختبر كل زر:
[ ] مسح الكاش → يجب أن تظهر رسالة نجاح
[ ] تحسين الأداء → يجب أن تظهر رسالة نجاح
[ ] مسح ملفات اللوج → تظهر رسالة تأكيد ثم رسالة نجاح

❌ إذا ظهر خطأ 404:
   → تحقق من وجود MaintenanceController.php
   → تأكد من تحديث routes/web.php بشكل صحيح
   → امسح الكاش: احذف bootstrap/cache/routes-v7.php

───────────────────────────────────────────────────────────────────
اختبار 4: تحميل فيديو TikTok
───────────────────────────────────────────────────────────────────

URL: https://yourdomain.com

1. أدخل رابط فيديو TikTok في النموذج
   مثال: https://www.tiktok.com/@username/video/1234567890

2. اضغط على زر التحميل

✅ ما يجب أن يحدث:
   - معلومات الفيديو تظهر (العنوان، المؤلف، الصورة)
   - أزرار التحميل تظهر
   - يمكن تحميل الفيديو بجودات مختلفة

❌ إذا ظهر خطأ:
   → تحقق من اتصال الإنترنت على السيرفر
   → راجع إعدادات Proxy في /admin/proxies
   → افحص storage/logs/laravel.log للتفاصيل

───────────────────────────────────────────────────────────────────
اختبار 5: التحقق من الأمان
───────────────────────────────────────────────────────────────────

أ. حماية ملف .env
URL: https://yourdomain.com/.env

✅ يجب أن تحصل على:
   - خطأ 403 Forbidden
   - أو خطأ 404 Not Found
   - أو صفحة بيضاء (ليس محتوى الملف!)

❌ إذا ظهر محتوى .env:
   → تحقق من وجود .htaccess في public_html/
   → تأكد من أن .htaccess يحتوي على حماية .env
   → اتصل بدعم iPage لتفعيل .htaccess

ب. تعطيل عرض الأخطاء
✅ في .env يجب أن يكون:
   APP_DEBUG=false
   APP_ENV=production

❌ إذا كانت رسائل الخطأ التفصيلية تظهر:
   → غيّر APP_DEBUG إلى false
   → امسح الكاش

ج. التحقق من HTTPS
✅ في شريط العنوان يجب أن يظهر:
   - قفل أخضر 🔒
   - https:// (ليس http://)

❌ إذا لم يكن HTTPS مفعلاً:
   → فعّل SSL Certificate في لوحة تحكم iPage
   → أضف إعادة توجيه في .htaccess

───────────────────────────────────────────────────────────────────
اختبار 6: فحص الصلاحيات
───────────────────────────────────────────────────────────────────

عبر File Manager في cPanel، تحقق من:

[ ] laravel-app/storage/ → 755 أو 775
[ ] laravel-app/bootstrap/cache/ → 755 أو 775
[ ] laravel-app/.env → 644
[ ] public_html/.htaccess → 644

إذا كانت الصلاحيات خاطئة:
   → انقر بزر الماوس الأيمن → Change Permissions
   → أدخل الرقم الصحيح
   → علّم على "Recurse" للمجلدات

───────────────────────────────────────────────────────────────────
اختبار 7: فحص اللوجات
───────────────────────────────────────────────────────────────────

عبر File Manager، افتح:
laravel-app/storage/logs/laravel.log

✅ ما يجب التحقق منه:
   - لا توجد أخطاء حرجة (CRITICAL, ERROR)
   - إذا كانت هناك تحذيرات (WARNING)، اقرأها
   - تأكد من عدم وجود مشاكل في الاتصال بقاعدة البيانات

❌ إذا كان الملف كبيراً جداً:
   → استخدم واجهة الصيانة لمسح اللوجات
   → أو احذف الملف يدوياً

───────────────────────────────────────────────────────────────────
اختبار 8: فحص قاعدة البيانات
───────────────────────────────────────────────────────────────────

عبر phpMyAdmin في iPage:

[ ] افتح قاعدة البيانات الخاصة بك
[ ] تحقق من وجود الجداول:
    - users
    - videos
    - proxies
    - migrations
    - failed_jobs
    - password_resets

[ ] افتح جدول users:
    - يجب أن يحتوي على حساب المدير
    - تحقق من email و password (مشفرة)

[ ] افتح جدول migrations:
    - يجب أن يحتوي على سجلات الـ migrations

───────────────────────────────────────────────────────────────────
اختبار 9: فحص الأداء
───────────────────────────────────────────────────────────────────

استخدم Developer Tools في المتصفح (F12):

أ. Network Tab
[ ] تحقق من سرعة تحميل الصفحة
[ ] يجب أن يكون معظم الطلبات خضراء (200 OK)
[ ] لا توجد ملفات مفقودة (404)

ب. Console Tab
[ ] لا توجد أخطاء JavaScript باللون الأحمر
[ ] لا توجد تحذيرات CORS

ج. Security Tab
[ ] Certificate valid
[ ] TLS 1.2 أو أحدث
[ ] لا توجد مشاكل أمنية

───────────────────────────────────────────────────────────────────
اختبار 10: اختبار الاستجابة (Responsive)
───────────────────────────────────────────────────────────────────

افتح الموقع على:
[ ] سطح المكتب (Desktop) → يعمل بشكل صحيح
[ ] الجوال (Mobile) → يتكيف مع الشاشة
[ ] التابلت (Tablet) → يعرض بشكل مناسب

استخدم Device Toolbar في Developer Tools للاختبار.

───────────────────────────────────────────────────────────────────
ملخص الاختبارات
───────────────────────────────────────────────────────────────────

إذا نجحت جميع الاختبارات أعلاه:
✅ التثبيت مكتمل وناجح
✅ الموقع جاهز للاستخدام
✅ يمكنك البدء في استقبال الزوار

إذا فشل أي اختبار:
❌ راجع القسم المقابل لحل المشكلة
❌ اقرأ INSTALLATION_GUIDE_IPAGE.md
❌ افحص storage/logs/laravel.log

───────────────────────────────────────────────────────────────────
النسخ الاحتياطية
───────────────────────────────────────────────────────────────────

الآن بعد نجاح التثبيت، أنشئ نسخة احتياطية:

[ ] قاعدة البيانات:
    phpMyAdmin → Export → Quick → Go

[ ] الملفات:
    Compress laravel-app/ → Download

احفظ النسخ الاحتياطية في مكان آمن!

───────────────────────────────────────────────────────────────────
الخطوات التالية
───────────────────────────────────────────────────────────────────

1. [ ] تخصيص إعدادات الموقع في /admin/settings
2. [ ] إضافة Proxies إذا لزم الأمر في /admin/proxies
3. [ ] تخصيص المظهر في /admin/appearance
4. [ ] إعداد جدول النسخ الاحتياطية
5. [ ] مراقبة اللوجات بانتظام
6. [ ] إعداد Cron Jobs (إن وجدت)

───────────────────────────────────────────────────────────────────

                     ✅ اختبار ناجح! ✅

              الموقع جاهز الآن للاستخدام الحقيقي!

═══════════════════════════════════════════════════════════════════
                         بالتوفيق! 🚀
═══════════════════════════════════════════════════════════════════
